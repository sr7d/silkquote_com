<section class="social-proof">
  <div class="container">
    <div class="social-proof__badges">
      <div class="social-proof__badge">
        <div class="social-proof__badge-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M9 12L11 14L15 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2"/>
          </svg>
        </div>
        <span class="social-proof__badge-text">100% Native Salesforce</span>
      </div>
      <div class="social-proof__badge">
        <div class="social-proof__badge-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M13 2L3 14H12L11 22L21 10H12L13 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <span class="social-proof__badge-text">No Code Required</span>
      </div>
      <div class="social-proof__badge">
        <div class="social-proof__badge-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 22C12 22 20 18 20 12V5L12 2L4 5V12C4 18 12 22 12 22Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M9 12L11 14L15 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <span class="social-proof__badge-text">AppExchange Security Reviewed</span>
      </div>
    </div>

    <div class="social-proof__carousel">
      <div class="social-proof__carousel-track" id="features-track">

        <div class="social-proof__feature-card">
          <div class="social-proof__feature-inner">
            <h4 class="social-proof__feature-title">On Brand Design</h4>
            <p class="social-proof__feature-desc">Upload a logo and set an accent color per template.</p>
          </div>
        </div>

        <div class="social-proof__feature-card">
          <div class="social-proof__feature-inner">
            <h4 class="social-proof__feature-title">One-Click PDF Generation</h4>
            <p class="social-proof__feature-desc">PDF quote from any Opportunity via Quick Action.</p>
          </div>
        </div>

        <div class="social-proof__feature-card">
          <div class="social-proof__feature-inner">
            <h4 class="social-proof__feature-title">Drag-and-Drop Editor</h4>
            <p class="social-proof__feature-desc">Reorder fields in each PDF section.</p>
          </div>
        </div>

        <div class="social-proof__feature-card">
          <div class="social-proof__feature-inner">
            <h4 class="social-proof__feature-title">Conditional Field Display</h4>
            <p class="social-proof__feature-desc">Show or hide fields and columns based on record values.</p>
          </div>
        </div>

        <div class="social-proof__feature-card">
          <div class="social-proof__feature-inner">
            <h4 class="social-proof__feature-title">Line Item Grouping</h4>
            <p class="social-proof__feature-desc">Group line items by any field with subtotals.</p>
          </div>
        </div>

        <div class="social-proof__feature-card">
          <div class="social-proof__feature-inner">
            <h4 class="social-proof__feature-title">Smart Template Selection</h4>
            <p class="social-proof__feature-desc">Filters by Opportunity field values automatically.</p>
          </div>
        </div>

        <div class="social-proof__feature-card">
          <div class="social-proof__feature-inner">
            <h4 class="social-proof__feature-title">In-Browser Preview</h4>
            <p class="social-proof__feature-desc">Review the PDF before saving or sending.</p>
          </div>
        </div>

        <div class="social-proof__feature-card">
          <div class="social-proof__feature-inner">
            <h4 class="social-proof__feature-title">Conditional Terms</h4>
            <p class="social-proof__feature-desc">Terms and Conditions with conditional availability</p>
          </div>
        </div>

        <div class="social-proof__feature-card">
          <div class="social-proof__feature-inner">
            <h4 class="social-proof__feature-title">Approval Routing Compatible</h4>
            <p class="social-proof__feature-desc">Build your approval processes around template selection.</p>
          </div>
        </div>

        <div class="social-proof__feature-card">
          <div class="social-proof__feature-inner">
            <h4 class="social-proof__feature-title">Flow Invocable Action</h4>
            <p class="social-proof__feature-desc">Trigger quote generation from any Flow.</p>
          </div>
        </div>

        <div class="social-proof__feature-card">
          <div class="social-proof__feature-inner">
            <h4 class="social-proof__feature-title">Configuration Validator</h4>
            <p class="social-proof__feature-desc">Scan templates, dynamic fields, and terms for problems.</p>
          </div>
        </div>

        <div class="social-proof__feature-card">
          <div class="social-proof__feature-inner">
            <h4 class="social-proof__feature-title">Email Quote Links</h4>
            <p class="social-proof__feature-desc">Send prospects a direct link to their quote from the Opportunity.</p>
          </div>
        </div>

        <div class="social-proof__feature-card">
          <div class="social-proof__feature-inner">
            <h4 class="social-proof__feature-title">Prospect Acceptance</h4>
            <p class="social-proof__feature-desc">Prospects accept or decline quotes directly, no account needed.</p>
          </div>
        </div>

        <div class="social-proof__feature-card">
          <div class="social-proof__feature-inner">
            <h4 class="social-proof__feature-title">Live Quote Preview</h4>
            <p class="social-proof__feature-desc">See the current quote in a live panel directly from the Opportunity.</p>
          </div>
        </div>

        <div class="social-proof__feature-card">
          <div class="social-proof__feature-inner">
            <h4 class="social-proof__feature-title">Email Open Tracking</h4>
            <p class="social-proof__feature-desc">Know when a prospect opens your quote email.</p>
          </div>
        </div>

        <div class="social-proof__feature-card">
          <div class="social-proof__feature-inner">
            <h4 class="social-proof__feature-title">Activity Tracking</h4>
            <p class="social-proof__feature-desc">Log every quote action: sent, viewed, accepted, declined.</p>
          </div>
        </div>

        <div class="social-proof__feature-card">
          <div class="social-proof__feature-inner">
            <h4 class="social-proof__feature-title">Dashboard &amp; Reporting</h4>
            <p class="social-proof__feature-desc">Analyze opportunities, templates, and activity to spot success patterns.</p>
          </div>
        </div>

        <div class="social-proof__feature-card">
          <div class="social-proof__feature-inner">
            <h4 class="social-proof__feature-title">Quote Version History</h4>
            <p class="social-proof__feature-desc">Retain all past quote versions per Opportunity.</p>
          </div>
        </div>

        <div class="social-proof__feature-card">
          <div class="social-proof__feature-inner">
            <h4 class="social-proof__feature-title">Stale Quote Indicator</h4>
            <p class="social-proof__feature-desc">Flag PDFs that are out of date with the current Opportunity data.</p>
          </div>
        </div>

      </div>

    </div>

    <div class="social-proof__carousel-controls">
      <button class="social-proof__carousel-btn" id="carousel-prev" aria-label="Previous">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"/></svg>
      </button>
      <button class="social-proof__carousel-btn" id="carousel-next" aria-label="Next">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"/></svg>
      </button>
    </div>

    <script>
    (function() {
      var track = document.getElementById('features-track');
      if (!track) return;

      var cards = track.querySelectorAll('.social-proof__feature-card');
      var cardCount = cards.length;
      var originalHTML = track.innerHTML;
      track.innerHTML = originalHTML + originalHTML;

      var carousel = track.parentElement;
      var scrollPos = 0;
      var hovered = false;
      var inView = false;
      var rafId = null;
      var maxSpeed = 0.5;
      var currentSpeed = 0;
      var easeDuration = 60;

      var prevBtn = document.getElementById('carousel-prev');
      var nextBtn = document.getElementById('carousel-next');
      var nudgeRemaining = 0;

      function getOriginalWidth() {
        return track.scrollWidth / 2;
      }

      function getCardWidth() {
        var allCards = track.querySelectorAll('.social-proof__feature-card');
        if (allCards.length === 0) return 0;
        return allCards[0].offsetWidth;
      }

      function nudge(direction) {
        nudgeRemaining += direction * getCardWidth();
      }

      if (prevBtn) {
        prevBtn.addEventListener('click', function() { nudge(1); });
      }
      if (nextBtn) {
        nextBtn.addEventListener('click', function() { nudge(-1); });
      }

      function step() {
        var speed = 0;

        // Normal auto-scroll
        if (!hovered && inView) {
          currentSpeed = Math.min(currentSpeed + maxSpeed / easeDuration, maxSpeed);
        } else {
          currentSpeed = Math.max(currentSpeed - maxSpeed / easeDuration, 0);
        }
        speed = currentSpeed;

        // Nudge: ease through remaining distance
        if (nudgeRemaining !== 0) {
          var nudgeStep = nudgeRemaining * 0.12;
          if (Math.abs(nudgeStep) < 0.5) nudgeStep = nudgeRemaining > 0 ? 0.5 : -0.5;
          if (Math.abs(nudgeRemaining) < 1) {
            nudgeStep = nudgeRemaining;
            nudgeRemaining = 0;
          } else {
            nudgeRemaining -= nudgeStep;
          }
          speed += nudgeStep;
        }

        if (speed !== 0) {
          scrollPos += speed;
          var origW = getOriginalWidth();
          if (scrollPos >= origW) scrollPos -= origW;
          if (scrollPos < 0) scrollPos += origW;
          track.style.transform = 'translateX(-' + scrollPos + 'px)';
        }

        rafId = requestAnimationFrame(step);
      }

      function start() {
        if (!rafId) rafId = requestAnimationFrame(step);
      }

      var delayTimer = null;

      var observer = new IntersectionObserver(function(entries) {
        if (entries[0].isIntersecting) {
          delayTimer = setTimeout(function() { inView = true; start(); }, 500);
        } else {
          clearTimeout(delayTimer);
          inView = false;
          start();
        }
      }, { threshold: 0.1 });

      observer.observe(carousel);

      carousel.addEventListener('mouseenter', function() { hovered = true; });
      carousel.addEventListener('mouseleave', function() { hovered = false; });
      carousel.addEventListener('touchstart', function() { hovered = true; }, { passive: true });
      carousel.addEventListener('touchend', function() { hovered = false; });

    })();
    </script>
  </div>
</section>
